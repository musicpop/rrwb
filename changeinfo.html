<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta charset="utf-8" />
<title>基本信息修改</title>
<link rel="stylesheet" type="text/css" href="styles/changeinfo.css"/>
 <link rel="stylesheet" type="text/css" href="styles/imgareaselect-default.css" /> 
 <script language="javascript" type="text/javascript" src="scripts/jquery-2.1.1.js"></script>
  <script type="text/javascript" src="scripts/jquery.imgareaselect.pack.js"></script>
<script language="javascript" type="text/javascript" src="scripts/warning.js"></script>

<script language="javascript" type="text/javascript" src="scripts/jquery.Jcrop.js"></script>
<script>

$(document).ready(function() {
    $("#file").change(function(){
        var objUrl = getObjectURL(this.files[0]) ;
        console.log("objUrl = "+objUrl) ;
        if (objUrl) {
            $("#big_view").attr("src", objUrl) ;
            $("#crop_preview").attr("src", objUrl) ;
        }
    }) ;

     $('#big_view').imgAreaSelect({ aspectRatio: '1:1', handles: true,
        fadeSpeed: 200, onSelectChange: preview });

     $("#upload_form").submit(function(e) {
        if(window.FormData !== undefined)  // for HTML5 browsers
        {
            var formData = new FormData(this);
            $.ajax({
                url: '/crud/uploadServlet',
                type: 'POST',
                mimeType:"multipart/form-data",
                data:formData,
                contentType: false,
            cache: false,
            processData:false
            })
            .done(function(data) {
                console.log(data);
            })
            .fail(function() {
                console.log("error");
            })
            .always(function() {
                console.log("complete");
            });
            e.preventDefault(); //Prevent Default action.
        }
       else  //for olden browsers
        {
            //generate a random id
            var  iframeId = 'unique' + (new Date().getTime());
     
            //create an empty iframe
            var iframe = $('<iframe src="javascript:false;" name="'+iframeId+'" />');
     
            //hide it
            iframe.hide();
     
            //set form target to iframe
            $(this).attr('target',iframeId);
     
            //Add iframe to body
            iframe.appendTo('body');
            iframe.load(function(e)
            {
                var doc = getDoc(iframe[0]);
                var docRoot = doc.body ? doc.body : doc.documentElement;
                var data = docRoot.innerHTML;
                //data is returned from server.
     
            });
 
         }     
 
     });
 
     
});
//建立一個可存取到該file的url
function getObjectURL(file) {
    var url = null ; 
    if (window.createObjectURL!=undefined) { // basic
        url = window.createObjectURL(file) ;
    } else if (window.URL!=undefined) { // mozilla(firefox)
        url = window.URL.createObjectURL(file) ;
    } else if (window.webkitURL!=undefined) { // webkit or chrome
        url = window.webkitURL.createObjectURL(file) ;
    }
    return url ;
}
function preview(img, selection) {
    if (!selection.width || !selection.height)
        return;
    
    var scaleX = 100 / selection.width;
    var scaleY = 100 / selection.height;

    $('#preview_box img').css({
        width: Math.round(scaleX * 300),
        height: Math.round(scaleY * 300),
        marginLeft: -Math.round(scaleX * selection.x1),
        marginTop: -Math.round(scaleY * selection.y1)
    });

    $('#x1').val(selection.x1);
    $('#y1').val(selection.y1);
    $('#x2').val(selection.x2);
    $('#y2').val(selection.y2);   
}
</script>
</head>

<body>
   <!------------------------------------------ begin 固定栏---------------------------------------------------->
 <!--  <div id="guiding">
            <a href="#">首页</a><a href="#">广场</a><a href="#">应用</a><a href="#">游戏</a><a href="#">微群</a>
                <span id="search">
                <input class="input" type="text" maxlength="40" value="搜索微博、找人" name="">
                <button onclick="shousuo" value="shousuo">搜索</button>
                </span>
            <a href="#">动星师</a><a href="#">手机</a><a href="#">找人</a><a href="#">信息</a><a href="#">账号</a>
    </div>-->
    <!-----------------------------------------end 固定栏-------------------------------------------------------->
    <div id="global_header">
        <!--顶部导航栏开始-->
        <div class="header">
              <div class="header_logo"><img src="images/logo_update_02.png" width="190" height="34" />    </div>
              <div class="header_Llist">
                    <ul>
                        <li><a href="index.html">首页</a></li>
                        <li><a href="guangchang.html" target="_blank">广场</a></li>
                        <li><a href="#">微群</a></li>
                        <li><a href="#">应用</a></li>
                        <li><a href="#">游戏</a></li>
                    </ul>
              </div>
              <div class="header_M">
              <div class="header_Mi">
                    <form action="" method="post" name=""><input type="text" value="请输入搜索内容" class="bb" />
                     </form>
                    </div>
                     <div class="header_Ms"><a href="#"><img src="images/sou_08.gif"  /></a></div>
              </div>
              <div class="header_Rlist">
                    <ul>
                        <li><a href="#">某人</a></li>
                        <li><a href="#">手机</a></li>
                        <li><a href="#">消息</a></li>
                        <li><a href="changeinfo.html" target="_blank">修改资料</a></li>
                    </ul>
              </div>
        </div>
      <!--顶部导航栏结束-->
</div> 
 
    <div id="total">
      <div id="leftpart" align="center">
<div id="lefttop">
                 <div id="top">账号设置</div>
                 <div id="top1"><img src="images/img1.gif" />个人资料&nbsp;预览</div>
                 <div id="top2"><font color="#000000">基本信息</font></div>
                 <div id="photo"><img src="images/image2.jpg" /><a href="#">修改头像</a></div>
             </div>
         
             
             <hr/>
              
             <div id="leftmid">
                 <div id="secret"><img src="images/image4.jpg" /><a href="#">隐私设置</a></div>
                 <div id="mid1"><a href="#">通用</a></div>
                 <div id="mid2"><a href="#">黑名单</a></div>
                 <div id="mid3"><a href="#">屏蔽设置</a></div>
                 <div id="mid4"><a href="#">通知屏蔽</a></div>
             </div>
             <hr/>
              
             <div id="leftbot">
                 <div id="secret"><img src="images/img8.jpg" /><a href="#">账号安全</a></div>
                 <div id="mid3"><a href="#">安全信息</a></div>
                 <div id="mid3"><a href="#">修改密码</a></div>
 
             </div>
      </div>
    <!---------------------- end 左部-------------------------------->
    <!---------------------- begin 右部-------------------------------->
        <div id="rightpart">
            <div id="righttop">基本信息<span id="must">(<font color="#FF0000">&nbsp;*&nbsp;</font>为必填&nbsp;)</span></div>
            <hr style="width:785px"/>
            <div id="topdown">以下信息将显示在<a href="#">个人资料页</a>，方便大家了解你</div>
          <span>
            <div id="midleft">登录名：</div>
                <div id="midright">ddd@126.com &nbsp;&nbsp;<a href="#">修改密码</a></div>
            </span>
            <span>
            <div id="midleft2"><font color="#FF0000">*</font>昵称：</div>
            <div id="midright2"><input name="name" id="nicheng" type="text" value="abc"/></div>
            </span>
            <span>
            <div id="midleft2">真实姓名：</div>
            <div id="midright2">
                <input name="name" type="text" value="李四"/>
                <select name="public" id="public">
                <option value="1">仅自己可见</option><option value="2">所有的人可见</option><option value="3">我关注的人可见</option>
                </select>
            </div>
            </span>
            <span>
            <div id="midleft2"><font color="#FF0000">*</font>所在地：</div>
            <div id="midright3">
         <select name="province" id="province">
         <option value="1">山东</option><option value="2">北京</option><option value="3">重庆</option><option value="4">福建</option>
         <option value="5">甘肃</option><option value="6">广东</option><option value="7">广西</option><option value="8">贵州</option>
         <option value="9">安徽</option><option value="10">海南</option><option value="11">河北</option><option value="12">天津</option>
         </select>&nbsp;
         <select name="city" id="city"><option value="1">淄博</option>
         <option value="1">不限</option><option value="2">济南</option><option value="3">青岛</option><option value="4">枣庄</option>
         <option value="5">东营</option><option value="6">烟台</option><option value="7">潍坊</option><option value="8">济宁</option>
         <option value="9">泰安</option><option value="10">威海</option><option value="11">日照</option><option value="12">莱芜</option>
         <option value="13">临沂</option><option value="14">德州</option><option value="15">聊城</option><option value="16">菏泽</option>
         </select></div>
            </span>
             <span>
            <div id="midleft2"><font color="#FF0000">*</font>性别：</div>
          <div id="midright4">
                <input name="sex" id="sex" type="radio" value="1" checked="checked"/>男
                <input name="sex" id="sex" type="radio" value="0"/>女
            </div>
            </span>
             <span>
            <div id="midleft2">生日：</div>
            <div id="midright3">
         <select name="year" id="year"><option value="15">1992</option>
         <option value="1">2012</option><option value="2">2011</option><option value="3">2010</option><option value="4">2009</option>
         <option value="5">2008</option><option value="6">2007</option><option value="7">2006</option><option value="8">2005</option>
        <option value="9">2004</option><option value="10">2003</option><option value="11">2002</option><option value="12">2001</option>
       <option value="10">2000</option><option value="11">1999</option><option value="12">1998</option><option value="13">1997</option>
       <option value="14">1996</option><option value="15">1995</option><option value="16">1994</option><option value="17">1993</option>
       <option value="16">1991</option><option value="17">1990</option><option value="18">1989</option>
         </select>年&nbsp;
         <select name="month" id="month"><option value="11">11</option>
         <option value="1">01</option><option value="2">02</option><option value="3">03</option><option value="4">04</option>
         <option value="5">05</option><option value="6">06</option><option value="7">07</option><option value="8">08</option>
         <option value="9">09</option><option value="10">10</option><option value="12">12</option>
          </select>月&nbsp;
          <select name="day" id="day"><option value="8">08</option>
         <option value="1">01</option><option value="2">02</option><option value="3">03</option><option value="4">04</option>
         <option value="5">05</option><option value="6">06</option><option value="7">07</option>
         <option value="9">09</option><option value="10">10</option><option value="11">11</option><option value="12">12</option>
         <option value="13">13</option><option value="14">14</option><option value="15">15</option><option value="16">16</option>
         <option value="17">17</option><option value="18">18</option><option value="19">19</option><option value="20">20</option>
         <option value="21">21</option><option value="22">22</option><option value="23">23</option><option value="24">24</option>
         <option value="25">25</option><option value="26">26</option><option value="27">27</option><option value="28">28</option>
         <option value="29">29</option><option value="30">30</option><option value="31">31</option>
          </select>日&nbsp;&nbsp;
                <select name="public" id="public1"><option value="1">公开完整显示</option>
                <option value="2">只显示星座</option><option value="3">只显示月日</option><option value="4">保密</option>
                </select>
          </div>
          </span>
          <span>
            <div id="midleft2">博客地址：</div>
            <div id="midright2">
                <input name="name" type="text" value=""/>
                <select name="public" id="public">
                    <option value="1">仅自己可见</option><option value="2">所有的人可见</option><option value="3">我关注的人可见</option>
                </select>
            </div>
          </span>
            <div id="blogdown">还没有博客？<a href="#">立即开通</a></div>
            <span>
                <div id="midleft">联系邮箱：</div>
                <div id="midright">luoyuliuxing@126.com&nbsp;&nbsp;<a href="#">修改</a></div>
            </span>
             <span>
            <div id="midleft2">QQ：</div>
            <div id="midright2">
            <input name="name" type="text" value="583880851"/>
            <select name="public" id="public">
                <option value="1">仅自己可见</option><option value="2">所有的人可见</option><option value="3">我关注的人可见</option>
            </select>
            </div>
            </span>
             <span>
            <div id="midleft2">MSN：</div>
            <div id="midright2">
                <input name="name" type="text" value=""/>
                <select name="public" id="public">
                    <option value="1">仅自己可见</option><option value="2">所有的人可见</option><option value="3">我关注的人可见</option>
                </select>
            </div>
            </span>
            <span>
            <div id="midleft2">头像：</div>
            <div id="uploader">
                    <form name="" id="upload_form" method="post" enctype="multipart/form-data"  >
                           <input name="photo" id="file"  size="27" type="file" multiple="multiple"/>   
                     
                    </br>
                        <div style="width: 100px; height: 100px; overflow: hidden;">
                        <span id="preview_box" class="crop_preview"><img id="crop_preview" src="" style="width: 100px; height: 100px; overflow: hidden;"/> 
                            <input type="hidden" id="y1" class="y1" name="y" />
                                <input type="hidden" id="x1" class="x1" name="x" />
                                <input type="hidden" id="y2" class="y2" name="y1" />
                                <input type="hidden" id="x2" class="x2" name="x1" />
                                </div>                             
                        <input id = "upload_but" name="action" value="上传" type="submit" />
                    </form>
        
                </div>
            </span><br/>
            
            <span id="correct"><button type="submit" onclick=" return demo6()"><span>保存</span></button></span>
        </div>
 
    <div id="footer">
        <ul>
            <li><a href="#">团队简介</a></li>
            <li><a href="#">联系方式</a></li>
            <li><a href="#">网站地图</a></li>
            <li><a href="#">达人认证</a></li>
            <li><a href="#">开放平台</a></li>
            <li><a href="#">信息举报</a></li>
        </ul>
        
    </div>
    <!----------------------  End boot --------------------------->
</div>
    <!---------------------------------------- end 正文------------------------------------------------------->
</body>
</html>
